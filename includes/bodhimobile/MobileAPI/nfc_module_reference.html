<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>NFC</title>

    <link href="../../../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../../../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="../../../javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="includes includes_bodhimobile includes_bodhimobile_MobileAPI includes_bodhimobile_MobileAPI_nfc_module_reference">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../../../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a class="bodhi-logo" href="http://redbookconnect.github.io"> <img src="../../../images/logo.png" /> </a>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="nfc-module-reference">NFC Module Reference</h1>

<h2 id="overview">Overview</h2>

<p>This module provides the ability to read and write NDEF messages to tags or share NDEF messages with peers.</p>

<h2 id="tasks">Tasks</h2>

<ul>
<li><code class="prettyprint">write</code> function</li>
<li><code class="prettyprint">share</code> function</li>
<li><code class="prettyprint">unshare</code> function</li>
<li><code class="prettyprint">erase</code> function</li>
<li><code class="prettyprint">addTagDiscoveredListener</code> function</li>
<li><code class="prettyprint">removeTagDiscoveredListener</code> function</li>
<li><code class="prettyprint">addNdefListener</code> function</li>
<li><code class="prettyprint">removeNdefListener</code> function</li>
<li><code class="prettyprint">addNdefFormatableListener</code> function<br></li>
<li><code class="prettyprint">handover</code> function</li>
<li><code class="prettyprint">stopHandover</code> function</li>
<li><code class="prettyprint">nfc.ndef</code> event</li>
<li><code class="prettyprint">nfc.ndefformatable</code> event</li>
<li><code class="prettyprint">nfc.tagdiscovered</code> event</li>
</ul>

<h2 id="functions">Functions</h2>

<h3 id="write">write</h3>

<p>Writes an NDEF Message to a NFC tag.</p>

<h4 id="discussion">Discussion</h4>

<p>nfc.write(message, errorCallback);</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<ul>
<li>_message_required</li>
</ul>

<p>A NDEF Message is an array of one or more NDEF Records</p>

<h4 id="sample">Sample</h4>

<p>var message = [
        ndef.textRecord(&ldquo;hello, world&rdquo;),
        ndef.uriRecord(&ldquo;http://www.google.com&rdquo;)
    ];</p>

<p>nfc.write(message, errorCallback);</p>

<h3 id="share">share</h3>

<p>Function writes an NdefMessage via peer-to-peer.  This should appear as an NFC tag to another device.</p>

<h4 id="discussion">Discussion</h4>

<p>nfc.share(message, errorCallback);</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<ul>
<li>_message_required</li>
</ul>

<p>A NDEF Message is an array of one or more NDEF Records</p>

<h4 id="sample">Sample</h4>

<p>var message = [
        ndef.textRecord(&ldquo;hello, world&rdquo;),
        ndef.uriRecord(&ldquo;http://www.google.com&rdquo;)
    ];</p>

<p>nfc.share(message, errorCallback);</p>

<h3 id="unshare">unshare</h3>

<p>Stop sharing NDEF data via peer-to-peer.</p>

<h4 id="discussion">Discussion</h4>

<p>nfc.share(message, errorCallback);</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="sample">Sample</h4>

<p>nfc.unshare(errorCallback);</p>

<h3 id="erase">erase</h3>

<p>Erase a tag by writing an empty message.  Will format unformatted tags before writing.</p>

<h4 id="discussion">Discussion</h4>

<p>nfc.erase(errorCallback);</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="sample">Sample</h4>

<p>nfc.erase(errorCallback);</p>

<h3 id="handover">handover</h3>

<p>Send a file to another device via NFC handover. Function shares files to a NFC peer using handover. Files are sent by specifying a file:// or context:// URI or a list of URIs. The file transfer is initiated with NFC but the transfer is completed with over Bluetooth or WiFi which is handled by a NFC handover request. The Android code is responsible for building the handover NFC Message. Supported only on Android</p>

<h4 id="discussion">Discussion</h4>

<p>nfc.handover(uris, errorCallback);</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<ul>
<li>_uris_required</li>
</ul>

<p>A URI as a String, or an <em>array</em> of URIs.</p>

<h4 id="sample">Sample</h4>

<p>var uri = &ldquo;content://media/external/image/media/15&rdquo;;
    nfc.handover(uri, errorCallback);</p>

<p>var uris = [
        &ldquo;content://media/external/image/media/15&rdquo;,
        &ldquo;content://media/external/image/media/126&rdquo;,
        &ldquo;content://media/external/image/media/345&rdquo;
    ];
    nfc.handover(uris, errorCallback);</p>

<h3 id="stophandover">stopHandover</h3>

<p>Stop sharing NDEF data via NFC handover.</p>

<h4 id="discussion">Discussion</h4>

<p>nfc.stopHandover(errorCallback);</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h3 id="addndeflistener">addNdefListener</h3>

<p>Registers an event listener for any NDEF tag.</p>

<h4 id="discussion">Discussion</h4>

<p>nfc.addNdefListener(callback);</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li>_callback_required</li>
</ul>

<p>The callback that is called when an NDEF tag is read.</p>

<h3 id="removendeflistener">removeNdefListener</h3>

<p>Removes the event listener for NDEF tags added via <code class="prettyprint">nfc.addNdefListener</code>.</p>

<h4 id="discussion">Discussion</h4>

<p>nfc.removeNdefListener(callback);</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li>_callback_required</li>
</ul>

<p>The callback that is called when the listener is successfully removed.</p>

<h3 id="addndefformatablelistener">addNdefFormatableListener</h3>

<p>Registers an event listener for formatable NDEF tags.</p>

<h4 id="discussion">Discussion</h4>

<p>nfc.addNdefFormatableListener(callback);</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li>_callback_required</li>
</ul>

<p>The callback that is called when NDEF formatable tag is read.</p>

<h3 id="addtagdiscoveredlistener">addTagDiscoveredListener</h3>

<p>Registers the callback for tag events.</p>

<p>This event occurs when any tag is detected by the phone.</p>

<h4 id="discussion">Discussion</h4>

<p>nfc.addTagDiscoveredListener(callback);</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li>_callback_required</li>
</ul>

<p>The callback that is called when a tag is detected.</p>

<h3 id="removetagdiscoveredlistener">removeTagDiscoveredListener</h3>

<p>Removes the event listener added via <code class="prettyprint">nfc.addTagDiscoveredListener</code>.</p>

<h4 id="discussion">Discussion</h4>

<p>nfc.removeTagDiscoveredListener(callback);</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li>_callback_required</li>
</ul>

<p>The callback that is called when the listener is successfully removed.</p>

<h2 id="events">Events</h2>

<h3 id="nfc.ndef">nfc.ndef</h3>

<h4 id="discussion">Discussion</h4>

<p>A ndef event is fired when a NDEF tag is read.</p>

<h3 id="nfc.ndefformatable">nfc.ndefformatable</h3>

<h4 id="discussion">Discussion</h4>

<p>A ndef-formatable event occurs when a tag is read that can be NDEF formatted. This is not fired for tags that are already formatted as NDEF. The ndef-formatable event will not contain an NdefMessage.</p>

<h3 id="nfc.tagdiscovered">nfc.tagdiscovered</h3>

<h4 id="discussion">Discussion</h4>

<p>Tagdiscovered event occurs when any tag is detected by the phone.</p>

<hr>

<p>&copy; 2014 Red Book Connect. All rights reserved. (Last updated: 2014-10-28)</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
