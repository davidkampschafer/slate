<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>iBeacon</title>

    <link href="../../../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../../../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="../../../javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="includes includes_bodhimobile includes_bodhimobile_MobileAPI includes_bodhimobile_MobileAPI_iBeacon">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../../../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a class="bodhi-logo" href="http://redbookconnect.github.io"> <img src="../../../images/logo.png" /> </a>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="ibeacon-module-reference">iBeacon Module Reference</h1>

<h2 id="overview">Overview</h2>

<p>This module provides the support for working with iBeacons. Developer can use
iBeacon module in 2 variants:</p>

<ol>
<li><strong>Can add and monitor regions.</strong>

<ul>
<li>If application in background when device falls into the region of iBeacon user will receive predefined notification.</li>
<li>If application in foreground developer can receive iBeacon.didEnterToRegion, iBeacon.didExitFromRegion, iBeacon.didFoundBeaconsInRegion events.</li>
</ul></li>
<li><strong>Can add and monitor separate iBeacon markers.</strong>

<ul>
<li>If application in background when device finds iBeacon marker user will receive predefined notification.</li>
<li>If application in foreground developer can receive iBeacon.didFoundBeacon and iBeacon.didLostBeacon events.</li>
</ul></li>
</ol>

<p>Both variants can be used simultaneously. Developer can monitor regions and
specific iBeacons in one moment.</p>

<h2 id="tasks">Tasks</h2>

<ul>
<li><code class="prettyprint">regionInfo</code> object</li>
<li><code class="prettyprint">beaconInfo</code> object</li>
<li><code class="prettyprint">supported</code> property</li>
<li><code class="prettyprint">getRegions</code> function</li>
<li><code class="prettyprint">addRegion</code> function</li>
<li><code class="prettyprint">checkRegion</code> function</li>
<li><code class="prettyprint">removeRegion</code> function</li>
<li><code class="prettyprint">removeAllRegions</code> function</li>
<li><code class="prettyprint">addBeacon</code> function</li>
<li><code class="prettyprint">getBeacons</code> function</li>
<li><code class="prettyprint">removeBeacon</code> function</li>
<li><code class="prettyprint">removeAllBeacons</code> function</li>
<li><code class="prettyprint">iBeacon.didEnterToRegion</code> event</li>
<li><code class="prettyprint">iBeacon.didExitFromRegion</code> event</li>
<li><code class="prettyprint">iBeacon.didFoundBeaconsInRegion</code> event</li>
<li><code class="prettyprint">iBeacon.didFoundBeacon</code> event</li>
<li><code class="prettyprint">iBeacon.didLostBeacon</code> event</li>
</ul>

<h2 id="objects">Objects</h2>

<h3 id="regioninfo">regionInfo</h3>

<h4 id="discussion">Discussion</h4>

<p>This Object contains information about iBeacon region.</p>

<h4 id="keys">Keys</h4>

<ul>
<li>_uuid_required</li>
</ul>

<p>A String value. Region&rsquo;s proximity UUID.</p>

<ul>
<li><em>enter_notification</em>required</li>
</ul>

<p>An Object. Contains information about notification that will be displayed if
the device entered to the region and application was in background.</p>

<p>Contains properties:</p>

<p>* <em>title</em></p>

<p>A String value. Local notification title.</p>

<p>* <em>message</em></p>

<p>A String value. Local notification message.</p>

<p>* <em>url</em></p>

<p>A String value. Link that will open after application will be opened from
notification.</p>

<h3 id="beaconinfo">beaconInfo</h3>

<h4 id="discussion">Discussion</h4>

<p>This Object contains information about iBeacon.</p>

<h4 id="keys">Keys</h4>

<ul>
<li>_uuid_required</li>
</ul>

<p>A String value. iBeacon proximity UUID.</p>

<ul>
<li>_major_required</li>
</ul>

<p>An Integer value. iBeacon major.</p>

<ul>
<li>_minor_required</li>
</ul>

<p>An Integer value. iBeacon minor.</p>

<ul>
<li>_proximity_optional</li>
</ul>

<p>A String value. Can have unknown, immediate, near, far value. Presented only
in iBeacon.didFoundBeaconsInRegion event.</p>

<ul>
<li><em>found_notification</em>required</li>
</ul>

<p>An Object. Contains information about notification that will be displayed if
the device found the iBeacon when application was in background.</p>

<p>Contains properties:</p>

<p>* <em>title</em></p>

<p>A String value. Local notification title.</p>

<p>* <em>message</em></p>

<p>A String value. Local notification message.</p>

<p>* <em>url</em></p>

<p>A String value. Link that will open after application will be opened from
notification.</p>

<h2 id="properties">Properties</h2>

<h3 id="supported">supported</h3>

<h4 id="discussion">Discussion</h4>

<p>Returns whether the device supports iBeacons monitoring.</p>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">var supported = iBeacon.supported;</code>  </p>

<h2 id="functions">Functions</h2>

<h3 id="getregions">getRegions</h3>

<p><code class="prettyprint">iBeacon.getRegions( successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Returns a list of regions which the monitored currently.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object which contains:</p>

<p>* <em>regions</em> - The list of regionInfo objects. (Array of Object)</p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">iBeacon.getRegions( function(info) {  
    alert(&quot;Monitored regions count: &quot;+info.regions.length);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="addregion">addRegion</h3>

<p><code class="prettyprint">iBeacon.addRegion( options, successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Adds new region to monitoring.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li>_options_required</li>
</ul>

<p>regionInfo object. Contains information about new iBeacon region.</p>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object which contains:</p>

<p>* <em>region</em> - Added regionInfo object. (Object)</p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">var region = {  
    uuid: &quot;b614b5eb-80fa-433b-ba25-dfadc540811a&quot;,  
    enter_notification: {  
        title: &quot;Hello!&quot;,  
        message: &quot;You are in region&quot;,  
        url: &quot;http://www.google.com&quot;}};  
iBeacon.addRegion( options, function(info) {  
    alert(&quot;Region added.&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="checkregion">checkRegion</h3>

<p><code class="prettyprint">iBeacon.checkRegion( uuid, successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Checks whether the device is within the region with <em>uuid</em>.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li>_uuid_required</li>
</ul>

<p>A String value. Checked region&rsquo;s proximity UUID.</p>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object which contains:</p>

<p>* <em>region</em> - Checked regionInfo object. (Object)
    * <em>inside</em> - <em>true</em> if the device is inside the region. Otherwise <em>false</em>. (Boolean)</p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">iBeacon.checkRegion( &quot;b614b5eb-80fa-433b-ba25-dfadc540811a&quot;, function(info) {  
    if (info.inside)  
        alert(&quot;You are inside.&quot;);  
    else  
        alert(&quot;You are outside.&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="removeregion">removeRegion</h3>

<p><code class="prettyprint">iBeacon.removeRegion( uuid, successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Removes the region with <em>uuid</em> from monitoring.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li>_uuid_required</li>
</ul>

<p>A String value. Removed region&rsquo;s proximity UUID.</p>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object which contains:</p>

<p>* <em>region</em> - Removed regionInfo object. (Object)</p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">iBeacon.removeRegion( &quot;b614b5eb-80fa-433b-ba25-dfadc540811a&quot;, function(info)
{  
    alert(&quot;Region removed.&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="removeallregions">removeAllRegions</h3>

<p><code class="prettyprint">iBeacon.removeAllRegions( successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Removes all regions from monitoring.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is always null</p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">iBeacon.removeAllRegions( function() {  
    alert(&quot;All regions removed.&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="addbeacon">addBeacon</h3>

<p><code class="prettyprint">iBeacon.addBeacon( options, successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Adds new iBeacon to monitoring.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li>_options_required</li>
</ul>

<p>beaconInfo object. Contains information about new iBeacon.</p>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object which contains:</p>

<p>* <em>beacon</em> - Added beaconInfo object. (Object)</p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">var beacon = {  
    uuid: &quot;b614b5eb-80fa-433b-ba25-dfadc540811a&quot;,  
    major: 1,  
    minor: 1,  
    found_notification: {  
        title: &quot;Hello!&quot;,  
        message: &quot;You found beacon&quot;,  
        url: &quot;http://www.google.com&quot;}};  
iBeacon.addBeacon( options, function(info) {  
    alert(&quot;Beacon added.&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="getbeacons">getBeacons</h3>

<p><code class="prettyprint">iBeacon.getBeacons( successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Returns a list of iBeacons which the monitored currently.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object which contains:</p>

<p>* <em>beacons</em> - The list of beaconInfo objects. (Array of Object)</p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">iBeacon.getBeacons( function(info) {  
    alert(&quot;Monitored beacons count: &quot;+info.beacons.length);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="removebeacon">removeBeacon</h3>

<p><code class="prettyprint">iBeacon.removeBeacon( options, successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Removes the iBeacon from monitoring.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li>_options_required</li>
</ul>

<p>beaconInfo object. Removed iBeacon information. Must contain uuid, major and
minor fields.</p>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object which contains:</p>

<p>* <em>beacon</em> - Removed beaconInfo object. (Object)</p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">var beacon = {  
    uuid: &quot;b614b5eb-80fa-433b-ba25-dfadc540811a&quot;,  
    major: 1,  
    minor: 1};  
iBeacon.removeBeacon( options, function(info) {  
    alert(&quot;Beacon removed.&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="removeallbeacons">removeAllBeacons</h3>

<p><code class="prettyprint">iBeacon.removeAllBeacons( successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Removes all iBeacons from monitoring.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is always null</p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">iBeacon.removeAllBeacons( function() {  
    alert(&quot;All iBeacons removed.&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h2 id="events">Events</h2>

<h3 id="ibeacon.didentertoregion">iBeacon.didEnterToRegion</h3>

<h4 id="discussion">Discussion</h4>

<p>Event received when the device enters to the monitored region.</p>

<h4 id="callback-arguments">Callback Arguments</h4>

<ul>
<li><em>region</em> - regionInfo object. (Object)</li>
</ul>

<h3 id="ibeacon.didexitfromregion">iBeacon.didExitFromRegion</h3>

<h4 id="discussion">Discussion</h4>

<p>Event received when the device exits from the monitored region.</p>

<h4 id="callback-arguments">Callback Arguments</h4>

<ul>
<li><em>region</em> - regionInfo object. (Object)</li>
</ul>

<h3 id="ibeacon.didfoundbeaconsinregion">iBeacon.didFoundBeaconsInRegion</h3>

<h4 id="discussion">Discussion</h4>

<p>Event received when the device updated the list of beacons in the region where
it is.</p>

<h4 id="callback-arguments">Callback Arguments</h4>

<ul>
<li><em>region</em> - regionInfo object. (Object)</li>
<li><em>beacons</em> - The list of beaconInfo objects. (Array of Object)</li>
</ul>

<h3 id="ibeacon.didfoundbeacon">iBeacon.didFoundBeacon</h3>

<h4 id="discussion">Discussion</h4>

<p>Event received when the device found the monitored iBeacon.</p>

<h4 id="callback-arguments">Callback Arguments</h4>

<ul>
<li><em>beacon</em> - beaconInfo object. (Object)</li>
</ul>

<h3 id="ibeacon.didlostbeacon">iBeacon.didLostBeacon</h3>

<h4 id="discussion">Discussion</h4>

<p>Event received when the device lost the monitored iBeacon.</p>

<h4 id="callback-arguments">Callback Arguments</h4>

<ul>
<li><p><em>beacon</em> - beaconInfo object. (Object)</p></li>
<li><p><a href="../index.html">Index</a></p></li>
</ul>

<hr>

<p>&copy; 2014 Red Book Connect. All rights reserved. (Last updated: 2014-06-14)</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
