<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Geofencing</title>

    <link href="../../../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../../../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="../../../javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="includes includes_bodhimobile includes_bodhimobile_MobileAPI includes_bodhimobile_MobileAPI_geofencing">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../../../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a class="bodhi-logo" href="http://redbookconnect.github.io"> <img src="../../../images/logo.png" /> </a>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="geofencing-module-reference">Geofencing Module Reference</h1>

<h2 id="overview">Overview</h2>

<p>This module provides the support for working with geo- regions. Developer can use
this module for monitoring regions:</p>

<p>* If application in background when device enters or exit from the geo-region user will receive predefined notifications.
    * If application in foreground developer can receive geofencing.didEnterToRegion, geofencing.didExitFromRegion events.</p>

<h2 id="tasks">Tasks</h2>

<ul>
<li><code class="prettyprint">notificationInfo</code> object</li>
<li><code class="prettyprint">regionInfo</code> object</li>
<li><code class="prettyprint">supported</code> property</li>
<li><code class="prettyprint">getRegions</code> function</li>
<li><code class="prettyprint">addRegion</code> function</li>
<li><code class="prettyprint">checkRegion</code> function</li>
<li><code class="prettyprint">removeRegion</code> function</li>
<li><code class="prettyprint">removeAllRegions</code> function</li>
<li><code class="prettyprint">getPageRegion</code> function</li>
<li><code class="prettyprint">geofencing.didEnterToRegion</code> event</li>
<li><code class="prettyprint">geofencing.didExitFromRegion</code> event</li>
</ul>

<h2 id="objects">Objects</h2>

<h3 id="notificationinfo">notificationInfo</h3>

<h4 id="discussion">Discussion</h4>

<p>This Object contains information about local notifications which displayed when application in background.
Used in <code class="prettyprint">regionInfo</code> object</p>

<h4 id="keys">Keys</h4>

<h5 id="title-optional"><code class="prettyprint">title</code> optional</h5>

<p>A String value. Local notification title.</p>

<h5 id="message-optional"><code class="prettyprint">message</code> optional</h5>

<p>A String value. Local notification message.</p>

<h5 id="url-optional"><code class="prettyprint">url</code> optional</h5>

<p>A String value. Link that will open after application will be opened from
notification.</p>

<h3 id="regioninfo">regionInfo</h3>

<h4 id="discussion">Discussion</h4>

<p>This Object contains information about geo- region.</p>

<h4 id="keys">Keys</h4>

<h5 id="id-optional"><code class="prettyprint">id</code> optional</h5>

<p>A String value. Identifier of region. Generated by application after adding new region for monitoring.</p>

<h5 id="name-optional"><code class="prettyprint">name</code> optional</h5>

<p>A String value. The name of region. Used only to simplify user identification region.</p>

<h5 id="center-required"><code class="prettyprint">center</code> required</h5>

<p>An Object. Contains information about center of region.</p>

<p>Contains properties:</p>

<ul>
<li><code class="prettyprint">latitude</code> required</li>
</ul>

<p>A Double value. The latitude of region&rsquo;s center.</p>

<ul>
<li><code class="prettyprint">longitude</code> required</li>
</ul>

<p>A Double value. The longitude of region&rsquo;s center.</p>

<h5 id="radius-required"><code class="prettyprint">radius</code> required</h5>

<p>A Double value. The circle radius of region.</p>

<h5 id="notifications-options"><code class="prettyprint">notifications</code> options</h5>

<p>An Object. Contains information about notifications that will be displayed if
the device entered or exited from the region and application was in background.</p>

<p>Contains properties:</p>

<ul>
<li><code class="prettyprint">enter</code> optional</li>
</ul>

<p>An <code class="prettyprint">notificationInfo</code> Object. Contains information about notification that will be displayed if
the device entered to the region and application was in background.</p>

<ul>
<li><code class="prettyprint">exit</code> optional</li>
</ul>

<p>An <code class="prettyprint">notificationInfo</code> Object. Contains information about notification that will be displayed if
the device exited from the region and application was in background.</p>

<h2 id="properties">Properties</h2>

<h3 id="supported">supported</h3>

<h4 id="discussion">Discussion</h4>

<p>Returns whether the device supports geofencing.</p>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">var supported = geofencing.supported;</code>  </p>

<h2 id="functions">Functions</h2>

<h3 id="getregions">getRegions</h3>

<p><code class="prettyprint">geofencing.getRegions( successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Returns a list of regions which the monitored currently.</p>

<h4 id="arguments">Arguments</h4>

<h5 id="succescallback-optional"><code class="prettyprint">succesCallback</code> optional</h5>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object which contains:</p>

<ul>
<li><code class="prettyprint">regions</code> - The list of regionInfo objects. (Array of Object)</li>
</ul>

<h5 id="errorcallback-optional"><code class="prettyprint">errorCallback</code> optional</h5>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">geofencing.getRegions( function(info) {  
    alert(&quot;Monitored regions count: &quot;+info.regions.length);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="addregion">addRegion</h3>

<p><code class="prettyprint">geofencing.addRegion( regionInfo, successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Adds new region to monitoring.</p>

<h4 id="arguments">Arguments</h4>

<h5 id="regioninfo-required"><code class="prettyprint">regionInfo</code> required</h5>

<p>regionInfo object. Contains information about new geo- region.</p>

<h5 id="succescallback-optional"><code class="prettyprint">succesCallback</code> optional</h5>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object which contains:</p>

<ul>
<li><code class="prettyprint">region</code> - Added regionInfo objects. (Object)</li>
</ul>

<h5 id="errorcallback-optional"><code class="prettyprint">errorCallback</code> optional</h5>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">var region = {  
    name: &quot;Test Region&quot;,
    center: {
        latitude: 0.00000,
        longitude: 0.00000,
    }
    raduis: 100,
    notification: {  
        enter:{
            title: &quot;Hello!&quot;,  
            message: &quot;You are in region&quot;,  
            url: &quot;http://www.google.com&quot;}}};  
geofencing.addRegion( region, function(info) {  
    alert(&quot;Region added.&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="checkregion">checkRegion</h3>

<p><code class="prettyprint">geofencing.checkRegion( regionInfo, successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Checks whether the device is within the region with regionInfo.id identifier.</p>

<h4 id="arguments">Arguments</h4>

<h5 id="regioninfo-required"><code class="prettyprint">regionInfo</code> required</h5>

<p>regionInfo object. Used only id property.</p>

<h5 id="succescallback-optional"><code class="prettyprint">succesCallback</code> optional</h5>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object which contains:</p>

<ul>
<li><code class="prettyprint">region</code> - Checked regionInfo objects. (Object)</li>
<li><code class="prettyprint">inside</code> - <em>true</em> if the device is inside the region. Otherwise <em>false</em>. (Boolean)</li>
</ul>

<h5 id="errorcallback-optional"><code class="prettyprint">errorCallback</code> optional</h5>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">geofencing.checkRegion( {id:&quot;b614b5eb-80fa-433b-ba25-dfadc540811a&quot;}, function(info) {  
    if (info.inside)  
        alert(&quot;You are inside.&quot;);  
    else  
        alert(&quot;You are outside.&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="removeregion">removeRegion</h3>

<p><code class="prettyprint">geofencing.removeRegion( regionInfo, successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Removes the region with regionInfo.id identifier from monitoring.</p>

<h4 id="arguments">Arguments</h4>

<h5 id="regioninfo-required"><code class="prettyprint">regionInfo</code> required</h5>

<p>regionInfo object. Used only id property.</p>

<h5 id="succescallback-optional"><code class="prettyprint">succesCallback</code> optional</h5>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object which contains:</p>

<ul>
<li><code class="prettyprint">region</code> - Removed regionInfo objects. (Object)</li>
</ul>

<h5 id="errorcallback-optional"><code class="prettyprint">errorCallback</code> optional</h5>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">geofencing.removeRegion( {id:&quot;b614b5eb-80fa-433b-ba25-dfadc540811a&quot;}, function(info)
{  
    alert(&quot;Region removed.&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="removeallregions">removeAllRegions</h3>

<p><code class="prettyprint">geofencing.removeAllRegions( successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Removes all regions from monitoring.</p>

<h4 id="arguments">Arguments</h4>

<h5 id="succescallback-optional"><code class="prettyprint">succesCallback</code> optional</h5>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is always null</p>

<h5 id="errorcallback-optional"><code class="prettyprint">errorCallback</code> optional</h5>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">geofencing.removeAllRegions( function() {  
    alert(&quot;All regions removed.&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="getpageregion">getPageRegion</h3>

<p><code class="prettyprint">geofencing.getPageRegion( successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Gets the region associated with current page.</p>

<p>When user clicks by notification applications will open the new page.</p>

<p>From this page JS can be called this method to get the region which was associated with notification.</p>

<h4 id="arguments">Arguments</h4>

<h5 id="succescallback-optional"><code class="prettyprint">succesCallback</code> optional</h5>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object which contains:</p>

<ul>
<li><code class="prettyprint">region</code> - Associated regionInfo objects or <em>null</em>. (Object)</li>
</ul>

<h5 id="errorcallback-optional"><code class="prettyprint">errorCallback</code> optional</h5>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">geofencing.getPageRegion( function(info) {  
    if (info.region)
        alert(&quot;The page opened from notification.&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h2 id="events">Events</h2>

<h3 id="geofencing.didentertoregion">geofencing.didEnterToRegion</h3>

<h4 id="discussion">Discussion</h4>

<p>Event received when the device enters to the monitored region.</p>

<h4 id="callback-arguments">Callback Arguments</h4>

<ul>
<li><code class="prettyprint">region</code> - regionInfo object. (Object)</li>
</ul>

<h3 id="geofencing.didexitfromregion">geofencing.didExitFromRegion</h3>

<h4 id="discussion">Discussion</h4>

<p>Event received when the device exits from the monitored region.</p>

<h4 id="callback-arguments">Callback Arguments</h4>

<ul>
<li><code class="prettyprint">region</code> - regionInfo object. (Object)</li>
</ul>

<p><a href="../index.html">Index</a></p>

<hr>

<p>&copy; 2015 Red Book Connect. All rights reserved. (Last updated: 2015-01-28)</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
