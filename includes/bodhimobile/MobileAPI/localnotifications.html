<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Local Notifications</title>

    <link href="../../../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../../../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="../../../javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="includes includes_bodhimobile includes_bodhimobile_MobileAPI includes_bodhimobile_MobileAPI_localnotifications">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../../../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a class="bodhi-logo" href="http://redbookconnect.github.io"> <img src="../../../images/logo.png" /> </a>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="local-notifications-module-reference">Local Notifications Module Reference</h1>

<h2 id="overview">Overview</h2>

<p>This module used for showing scheduled notification for user when the
application is in background.<br>
For example developer can schedule notification about meeting or birthday.<br>
Different platforms used different methods for it:</p>

<ul>
<li><strong>On iOS</strong> used local notifications</li>
<li><strong>On Android</strong> used notifications</li>
<li><strong>On Windows Phone</strong> used toasts</li>
</ul>

<h2 id="tasks">Tasks</h2>

<ul>
<li><code class="prettyprint">notification</code> object</li>
<li><code class="prettyprint">add</code> function</li>
<li><code class="prettyprint">cancel</code> function</li>
<li><code class="prettyprint">cancelAll</code> function</li>
<li><code class="prettyprint">getScheduled</code> function</li>
<li><code class="prettyprint">isScheduled</code> function</li>
<li><code class="prettyprint">received</code> function</li>
<li><code class="prettyprint">localnotifications.received</code> event</li>
</ul>

<h2 id="objects">Objects</h2>

<h3 id="notification">notification</h3>

<h4 id="discussion">Discussion</h4>

<p>This Object contains information about notification. It is simple Object value
with predefined keys.</p>

<h4 id="keys">Keys</h4>

<ul>
<li>_id_required</li>
</ul>

<p>The property with a String value. The identifier of notification.</p>

<ul>
<li>_title_required</li>
</ul>

<p>The property with a String value. The title of notification.</p>

<ul>
<li>_message_optional</li>
</ul>

<p>The property with a String value. The message of notification.</p>

<ul>
<li>_badge_optional</li>
</ul>

<p>The property with a Number value. This value will be displayed on application
icon when notification will be shown.</p>

<ul>
<li>_fireDate_required</li>
</ul>

<p>The property with a Date value. The date when notification will be shown.</p>

<ul>
<li>_repeat_optional</li>
</ul>

<p>The property with a String value. Repeat interval. The value can be one of:
secondly, minutely, hourly, daily, weekly, monthly, yearly</p>

<ul>
<li>_otherInfo_optional</li>
</ul>

<p>The property with a Object value. Developer defined data.</p>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">var notification = {id: &quot;1&quot;,  
        title: &quot;Birthday&quot;,  
        message: &quot;Today&#39;s Birthdays Alexey&quot;,  
        badge: 1,  
        fireDate: new Date(2014, 7, 25),  
        repeat: &quot;yearly&quot;,  
        otherInfo: null};</code>  </p>

<h2 id="functions">Functions</h2>

<h3 id="add">add</h3>

<p><code class="prettyprint">notifications.local.add( notification, successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Schedule new notification. If notification with id already exist it will be
rewritten.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>notification</em>required</li>
</ul>

<p>The parameter with information about new notification. See notification for
more info.</p>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is always null.</p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">notifications.local.add( newNotification, function () {  
    alert(&quot;Notification scheduled&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="cancel">cancel</h3>

<p><code class="prettyprint">notifications.local.cancel( notification, successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Cancel scheduled notification.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>notification</em>required</li>
</ul>

<p>The parameter with information about new notification. See notification for
more info but really used only <em>id</em> key.</p>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is always null.</p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">notifications.local.cancel( existNotification, function () {  
    alert(&quot;Notification cancelled&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="cancelall">cancelAll</h3>

<p><code class="prettyprint">notifications.local.cancelAll( successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Cancel all scheduled notifications.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is always null.</p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">notifications.local.cancelAll( function () {  
    alert(&quot;All notifications cancelled&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="getscheduled">getScheduled</h3>

<p><code class="prettyprint">notifications.local.getScheduled( successCallback, errorCallback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Return all scheduled notifications.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object and can contains keys:</p>

<p>* <em>notifications</em> - The Array with notification objects</p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">notifications.local.getScheduled( function (info) {  
    var text = &quot;&quot;;  
    for (var i = 0; i &lt; info.notifications.length; i++) {  
        text += &quot; &quot; \+ info.notifications[i].id;  
    }  
    alert(&quot;All notifications:&quot;+text);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="isscheduled">isScheduled</h3>

<p><code class="prettyprint">notifications.local.isScheduled(notification, successCallback, errorCallback
)</code></p>

<h4 id="discussion">Discussion</h4>

<p>Test scheduled notification.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li><em>notification</em>required</li>
</ul>

<p>The parameter with information about new notification. See notification for
more info but really used only <em>id</em> key.</p>

<ul>
<li><em>succesCallback</em>optional</li>
</ul>

<p>Success callback. Called when function finished without errors</p>

<p>Callback parameter is object and can contains keys:</p>

<p>* <em>notification</em> - The notification object which function received as parameter.
    * <em>isScheduled</em> - The Boolean object. <em>true</em> is scheduled instead <em>false</em></p>

<ul>
<li><em>errorCallback</em>optional</li>
</ul>

<p>Error Callback. Called when function return error.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em><a href="kernel_promise.html">RBCPromise</a> object</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">notifications.local.isScheduled( existNotification, function (info) {  
    if (info.isScheduled)  
        alert(&quot;Notification Scheduled&quot;);  
    else  
        alert(&quot;Notification doesn&#39;t Scheduled&quot;);  
}, function (error) {  
    alert(&quot;code: &quot; \+ error.code + &quot;\nmessage: &quot; \+ error.message);  
});</code>  </p>

<h3 id="received">received</h3>

<p><code class="prettyprint">notifications.local.received( callback )</code></p>

<h4 id="discussion">Discussion</h4>

<p>Register <em>callback</em> as observer for localnotifications.received event.</p>

<h4 id="arguments">Arguments</h4>

<ul>
<li>_callback_required</li>
</ul>

<p>Callback which execute when application oppened by notification.</p>

<h4 id="return-value">Return Value</h4>

<ul>
<li><em>this</em></li>
</ul>

<h4 id="sample">Sample</h4>

<p><code class="prettyprint">notifications.local.received( function(info) {  
    alert(&quot;Notification recevied: &quot; \+ info.notification.id);  
});</code>  </p>

<h2 id="events">Events</h2>

<h3 id="localnotifications.received">localnotifications.received</h3>

<h4 id="discussion">Discussion</h4>

<p>Event received when application oppened by notification</p>

<ul>
<li><a href="../index.html">Index</a></li>
</ul>

<hr>

<p>&copy; 2014 Red Book Connect. All rights reserved. (Last updated: 2014-06-05)</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
