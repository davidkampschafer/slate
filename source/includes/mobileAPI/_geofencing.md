## Geofencing Module

This module provides the support for working with geo- regions. Developer can use
this module for monitoring regions:

  * If application in background when device enters or exit from the geo-region user will receive predefined notifications.
  * If application in foreground developer can receive geofencing.didEnterToRegion, geofencing.didExitFromRegion events.

### Tasks

  * `notificationInfo` object
  * `notificationsInfo` object
  * `centerInfo` object
  * `regionInfo` object
  * `supported` property
  * `getRegions` function
  * `addRegion` function
  * `checkRegion` function
  * `removeRegion` function
  * `removeAllRegions` function
  * `getPageRegion` function
  * `geofencing.didEnterToRegion` event
  * `geofencing.didExitFromRegion` event

### Objects

#### notificationInfo

##### Discussion

This Object contains information about local notifications which displayed when application in background.
Used in `notificationsInfo` object

##### Keys

  * `title` optional

A String value. Local notification title.

  * `message` optional

A String value. Local notification message.

  * `url` optional

A String value. Link that will open after application will be opened from
notification.

#### notificationsInfo

##### Discussion

This Object contains information about notifications that will be displayed if
the device entered or exited from the region and application was in background.
Used in `regionInfo` object

##### Keys

   * `enter` optional

An `notificationInfo` Object. Contains information about notification that will be displayed if
the device entered to the region and application was in background.

   * `exit` optional

An `notificationInfo` Object. Contains information about notification that will be displayed if
the device exited from the region and application was in background.

#### centerInfo

##### Discussion

This Object contains contains information about center of region.
Used in `regionInfo` object

##### Keys

  * `latitude` required

A Double value. The latitude of region's center.

  * `longitude` required

A Double value. The longitude of region's center.

#### regionInfo

##### Discussion

This Object contains information about geo- region.

##### Keys

  * `id` optional

A String value. Identifier of region. Generated by application after adding new region for monitoring.

  * `name` optional

A String value. The name of region. Used only to simplify user identification region.

  * `center` required

An `centerInfo` Object. Contains information about center of region.  

  * `radius` required

A Double value. The circle radius of region.

  * `notifications` options

An `notificationsInfo` Object. Contains information about notifications that will be displayed if
the device entered or exited from the region and application was in background.

### Properties

#### supported

```javascript
var supported = geofencing.supported;
```

##### Discussion

Returns whether the device supports geofencing.

### Functions

#### getRegions

```javascript
geofencing.getRegions( function(info) {  
    alert("Monitored regions count: "+info.regions.length);  
}, function (error) {  
    alert("code: " + error.code + "\nmessage: " + error.message);  
});
```

`geofencing.getRegions( successCallback, errorCallback )`

##### Discussion

Returns a list of regions which the monitored currently.

##### Arguments

  * `succesCallback` optional

Success callback. Called when function finished without errors

Callback parameter is object which contains:

    - `regions` - The list of regionInfo objects. (Array of Object)

  * `errorCallback` optional

Error Callback. Called when function return error.

##### Return Value

  * [RBCPromise](#kernel-promise) object

#### addRegion

```javascript
var region = {  
    name: "Test Region",
    center: {
      latitude: 0.00000,
      longitude: 0.00000,
    }
    raduis: 100,
    notification: {  
      enter:{
          title: "Hello!",  
          message: "You are in region",  
          url: "http://www.google.com"}}};  
geofencing.addRegion( region, function(info) {  
    alert("Region added.");  
}, function (error) {  
    alert("code: " + error.code + "\nmessage: " + error.message);  
});
```

`geofencing.addRegion( regionInfo, successCallback, errorCallback )`

##### Discussion

Adds new region to monitoring.

##### Arguments

* `regionInfo` required

regionInfo object. Contains information about new geo- region.

* `succesCallback` optional

Success callback. Called when function finished without errors

Callback parameter is object which contains:

    - `region` - Added regionInfo objects. (Object)

* `errorCallback` optional

Error Callback. Called when function return error.

##### Return Value

  * [RBCPromise](#kernel-promise) object


#### checkRegion

```javascript
geofencing.checkRegion( {id:"b614b5eb-80fa-433b-ba25-dfadc540811a"}, function(info) {  
    if (info.inside)  
        alert("You are inside.");  
    else  
        alert("You are outside.");  
}, function (error) {  
    alert("code: " + error.code + "\nmessage: " + error.message);  
});
```

`geofencing.checkRegion( regionInfo, successCallback, errorCallback )`

##### Discussion

Checks whether the device is within the region with regionInfo.id identifier.

##### Arguments

* `regionInfo` required

regionInfo object. Used only id property.

* `succesCallback` optional

Success callback. Called when function finished without errors

Callback parameter is object which contains:

    - `region` - Checked regionInfo objects. (Object)

    - `inside` - _true_ if the device is inside the region. Otherwise _false_. (Boolean)

* `errorCallback` optional

Error Callback. Called when function return error.

##### Return Value

  * [RBCPromise](#kernel-promise) object

#### removeRegion

```javascript
geofencing.removeRegion( {id:"b614b5eb-80fa-433b-ba25-dfadc540811a"}, function(info)
{  
    alert("Region removed.");  
}, function (error) {  
    alert("code: " + error.code + "\nmessage: " + error.message);  
});
```

`geofencing.removeRegion( regionInfo, successCallback, errorCallback )`

##### Discussion

Removes the region with regionInfo.id identifier from monitoring.

##### Arguments

* `regionInfo` required

regionInfo object. Used only id property.

* `succesCallback` optional

Success callback. Called when function finished without errors

Callback parameter is object which contains:

      - `region` - Removed regionInfo objects. (Object)

* `errorCallback` optional

Error Callback. Called when function return error.

##### Return Value

  * [RBCPromise](#kernel-promise) object


#### removeAllRegions

```javascript
geofencing.removeAllRegions( function() {  
    alert("All regions removed.");  
}, function (error) {  
    alert("code: " + error.code + "\nmessage: " + error.message);  
});
```

`geofencing.removeAllRegions( successCallback, errorCallback )`

##### Discussion

Removes all regions from monitoring.

##### Arguments

* `succesCallback` optional

Success callback. Called when function finished without errors

Callback parameter is always null

* `errorCallback` optional

Error Callback. Called when function return error.

##### Return Value

  * [RBCPromise](#kernel-promise) object


#### getPageRegion

```javascript
geofencing.getPageRegion( function(info) {  
  if (info.region)
      alert("The page opened from notification.");  
}, function (error) {  
    alert("code: " + error.code + "\nmessage: " + error.message);  
});
```

`geofencing.getPageRegion( successCallback, errorCallback )`

##### Discussion

Gets the region associated with current page.

When user clicks by notification applications will open the new page.

From this page JS can be called this method to get the region which was associated with notification.

##### Arguments

* `succesCallback` optional

Success callback. Called when function finished without errors

Callback parameter is object which contains:

      - `region` - Associated regionInfo objects or _null_. (Object)

* `errorCallback` optional

Error Callback. Called when function return error.
##### Return Value

  * [RBCPromise](#kernel-promise) object

### Events

#### geofencing.didEnterToRegion

##### Discussion

Event received when the device enters to the monitored region.

##### Callback Arguments

  * `region` \- regionInfo object. (Object)

#### geofencing.didExitFromRegion

##### Discussion

Event received when the device exits from the monitored region.

##### Callback Arguments

  * `region` \- regionInfo object. (Object)